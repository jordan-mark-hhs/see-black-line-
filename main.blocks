<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id="n}2.n__~3J7CC.Gc~PY5">black_line</variable><variable id="-fQ3+v0Lt%FhRpWlRaqs">current_surface_reading</variable></variables><comment id="kG+V`++@{(@^i[VBh?i`" x="1632" y="-185" h="152" w="311">Note: The variable "black_line" is used as a reference for the micro:bot to determine what it is driving on.</comment><comment id="7FKM?4TR9GIw0BQSo26$" x="545" y="210" h="816" w="538">Note: If the line following sensor connected to P1 sees a black line, move backward and pivot to the left. We'll need to take a few more steps back to make sure that we do not get stuck in the same place. The reading can vary depending on the material that you are using for a black line. For black electrical tape, this is about ~800. 

It takes a few more seconds for the micro:bit to react when using the LED array and sending serial data. We'll want short delays so that there is enough time for the micro:bot to read the surface.</comment><comment id="bt!Z}62C+%ZwR]%~Fp$y" x="546" y="1076" h="450" w="537">Note: This part of the code drives the micro:bot forward slowly if we do not see a black line.</comment><block type="pxt-on-start" id="Ky$u@vCvHL$Py3U4%oLA" x="-10" y="-1074"><statement name="HANDLER"><block type="serial_redirect_to_usb" id="RcZ%tmgZ67L1Xr(:g=^V"><next><block type="motobit_invert" id="0YIFAcM$2OCYxhH%ygok"><field name="motor_number">Motor.Left</field><value name="invert"><shadow type="logic_boolean" id="VY7Bk|z,PEPlomXZxdZk"><field name="BOOL">TRUE</field></shadow></value><next><block type="motobit_invert" id=")mX;E`|uu-k)ZIPaT=m@"><field name="motor_number">Motor.Right</field><value name="invert"><shadow type="logic_boolean" id="I+!)eB%x(8aC/%jJKXgy"><field name="BOOL">TRUE</field></shadow></value><next><block type="variables_set" id="q]j)$.^r+$RM-rxZfF#Z"><field name="VAR" id="n}2.n__~3J7CC.Gc~PY5">black_line</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="device_get_analog_pin" id="UK:YZ)DoT](bqu)$S%?l"><field name="name">AnalogPin.P1</field></block></value><next><block type="serial_writestring" id="Oa*aPa6K%`6PB5MI;C~c"><value name="text"><shadow type="text" id="Ks24m`DPsR,`ry0ncY3*"><field name="TEXT">black_line_(i.e._Baseline_Value_of_Line_Following_Sensor_on_P1)=</field></shadow></value><next><block type="serial_writeline" id="ADjh)ZN#BF?VrF.DK33`"><value name="text"><shadow type="text"><field name="TEXT"></field></shadow><block type="variables_get" id="_3edoN{AQh7uVG^Fa^=W"><field name="VAR" id="n}2.n__~3J7CC.Gc~PY5">black_line</field></block></value></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="device_button_event" id="+D{cyB,BjAvJ(|BfMH[X" x="755" y="-1072"><field name="NAME">Button.A</field><statement name="HANDLER"><block type="variables_set" id=":qC(?CIZYj[A/IFj;H[V"><field name="VAR" id="n}2.n__~3J7CC.Gc~PY5">black_line</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="device_get_analog_pin" id="q3h]!`7s~1CS@1!I^u%W"><field name="name">AnalogPin.P1</field></block></value><next><block type="serial_writestring" id="JIn+UoeH$A`c3C0h-Ygk"><value name="text"><shadow type="text" id="{j.Moo!ZhSjrzcU54[)Z"><field name="TEXT">black_line_(i.e._Baseline_Value_of_Line_Following_Sensor_on_P1)=</field></shadow></value><next><block type="serial_writeline" id="^{HvVPmRw`j+vY|XB]}e"><value name="text"><shadow type="text"><field name="TEXT"></field></shadow><block type="variables_get" id="%dPu=%UcEs7ZbU+pD8K0"><field name="VAR" id="n}2.n__~3J7CC.Gc~PY5">black_line</field></block></value></block></next></block></next></block></statement></block><block type="device_forever" id="_zHTzI7HZEoX]0bwuzj!" x="0" y="0"><statement name="HANDLER"><block type="variables_set" id="0%59468,-IMisR]L$#qU"><field name="VAR" id="-fQ3+v0Lt%FhRpWlRaqs">current_surface_reading</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="device_get_analog_pin" id="K?*`]1k8Q:!X1QizKB^?"><field name="name">AnalogPin.P1</field></block></value><next><block type="serial_writeline" id="3?G(Sw?U,KK,lVId~#:v"><value name="text"><shadow type="text"><field name="TEXT"></field></shadow><block type="variables_get" id="wGy|1).MEmu_jp~6xMzb"><field name="VAR" id="-fQ3+v0Lt%FhRpWlRaqs">current_surface_reading</field></block></value><next><block type="controls_if" id="/?gLbsFiP1|lMB(HeZ31"><mutation else="1"></mutation><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="^0DLa)i0+c;_s/Dn|x_0"><field name="OP">GTE</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="U||o]smzT7l9N:AY0DRh"><field name="VAR" id="-fQ3+v0Lt%FhRpWlRaqs">current_surface_reading</field></block></value><value name="B"><shadow type="math_number"><field name="NUM">800</field></shadow><block type="math_arithmetic" id="(m#IpJ]a;l3=D^6.Q1F$"><field name="OP">MINUS</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="o,Ac$?!y;vWmHde5_LKR"><field name="VAR" id="n}2.n__~3J7CC.Gc~PY5">black_line</field></block></value><value name="B"><shadow type="math_number" id="r6;Qd]K-m(SRxFvZ:aSt"><field name="NUM">40</field></shadow></value></block></value></block></value><statement name="DO0"><block type="motobit_enable" id="$aGVdN#QE+?}7Ypr1FQ#"><field name="command">MotorPower.On</field><next><block type="motobit_setMotor" id="#?9Q!wAQGkhcLJF}SE~m"><field name="motor_number">Motor.Left</field><field name="path">MotorDirection.Reverse</field><value name="speed"><shadow type="math_number" id="q`PP+%-ii:h+p:zSa{Dr"><field name="NUM">30</field></shadow></value><next><block type="motobit_setMotor" id="ETb}#]lCj%8l5K9pH@VA"><field name="motor_number">Motor.Right</field><field name="path">MotorDirection.Reverse</field><value name="speed"><shadow type="math_number" id="Q*+HH.o?#`C0}1qK%KUF"><field name="NUM">30</field></shadow></value><next><block type="device_show_leds" id="KOpeo8nyoO4K%.fg5qJf"><field name="LEDS">`
        . # . # . 
        . # # # . 
        # # # # # 
        . # # # . 
        . . # . .
        `</field><next><block type="device_pause" id="6aQcdR:LErR}VQ.vvGOq"><value name="pause"><shadow type="math_number" id="ETAvNg)99i@bttee??vk"><field name="NUM">10</field></shadow></value><next><block type="motobit_setMotor" id="a^Fcylr#LeXW|PO|WX`*"><field name="motor_number">Motor.Left</field><field name="path">MotorDirection.Reverse</field><value name="speed"><shadow type="math_number" id="thGi|~s3TK`@(VN)*z*H"><field name="NUM">30</field></shadow></value><next><block type="motobit_setMotor" id=":@.VRHyO4Pe!G!)Hfx*w"><field name="motor_number">Motor.Right</field><field name="path">MotorDirection.Forward</field><value name="speed"><shadow type="math_number" id="-+I57y-IqP7qG+*v,o4$"><field name="NUM">40</field></shadow></value><next><block type="device_show_leds" id="VZQt={lj##SX5eK~^i]$"><field name="LEDS">`
        # # # . . 
        # # . . . 
        # . # . . 
        . . # . . 
        . . # . .
        `</field><next><block type="device_pause" id="ViDcw3wBt9?7hpDC~~-?"><value name="pause"><shadow type="math_number" id="N#$8X(Tv:It?iP^ZsUcm"><field name="NUM">5</field></shadow></value><next><block type="motobit_enable" id="2l(`yU+jF3x@pBi+I8i2"><field name="command">MotorPower.Off</field></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement><statement name="ELSE"><block type="motobit_enable" id="dNRB_M)Ihyb/3P2J:16m"><field name="command">MotorPower.On</field><next><block type="motobit_setMotor" id="xyuv,F%3j*$lSp}T0/k4"><field name="motor_number">Motor.Left</field><field name="path">MotorDirection.Forward</field><value name="speed"><shadow type="math_number" id="myRcki[mu(C!zKEPS0NK"><field name="NUM">40</field></shadow></value><next><block type="motobit_setMotor" id="|xI-O|M(.t@0v1(Rk}Lo"><field name="motor_number">Motor.Right</field><field name="path">MotorDirection.Forward</field><value name="speed"><shadow type="math_number" id="sf]],d;!:|PaIJ/K6lO="><field name="NUM">40</field></shadow></value><next><block type="device_show_leds" id="XFT)8+WsTezRy26~{.DH"><field name="LEDS">`
        . . # . . 
        . # # # . 
        # . # . # 
        . . # . . 
        . . # . .
        `</field><next><block type="device_pause" id="^pW{c%gJmjt%C/ku*wgx"><value name="pause"><shadow type="math_number" id="gY8A^P%*;B`a^4j6Fa:e"><field name="NUM">5</field></shadow></value><next><block type="motobit_enable" id="C|q}a2Z|/5j/oXAIfEx?"><field name="command">MotorPower.Off</field></block></next></block></next></block></next></block></next></block></next></block></statement></block></next></block></next></block></statement></block></xml>